"use strict";(self["webpackChunkmagicter_vpn"]=self["webpackChunkmagicter_vpn"]||[]).push([[742],{5742:function(e,t,l){l.r(t),l.d(t,{default:function(){return w}});l(4114);var a=l(6768),s=l(9936),o=l(3731),u=l(144),n=l(1387),c=l(9470),r=l(1127),i=l(7833),d=l(9283),v=l(3366),f=l(5630);const g={class:"flex flex-col items-center gap-4 w-full text-black-500"},m=(0,a.Lk)("h1",{class:"text-3xl font-bold"},"Verify email!",-1),p=(0,a.Lk)("p",{class:"text-sm"},"Enter the code we have sent you",-1),k={action:"",class:"w-full flex flex-col gap-3 text-sm"},h={class:"grid grid-cols-4 gap-6"};var y={__name:"verifyCodePage",setup(e){const{getStorage:t,setStorage:l,removeStorage:y,setToken:x}=(0,r.A)(),{deviceId:w}=(0,d.U)(),{veriyEmail:_}=(0,i.M)(),{showSuccessMsg:V,showErrorMsg:b}=(0,v.d)(),I=(0,n.rd)(),C=(0,u.KR)(t("email")),E=(0,u.KR)([0,1,2,3]),W=(0,u.KR)([]),F=(0,u.KR)(!1),K=(0,n.lq)(),S=K.query.type;async function A(){const e=parseInt(W.value.join(""));if("forgot-pwd"===S)I.push("/auth/reset-password?code="+e);else{const t={email:C.value,verify_code:e,device_id:w};if(F.value=!0,t.email&&t.verify_code){const e=await _(t);F.value=!1,200===e.status&&e.data.token?(x(e.data.token),l("user",JSON.stringify(e.data.user)),y("email"),I.push("/account"),V("Hello!, Welcome to your Magicter VPN account")):b(e.message)}}}const L=(0,a.EW)((()=>{const e=(0,f.I)();return e.codeInputFocus})),M=e=>{const t=(0,f.I)();t.triggerFocusedInput(e)};return(0,a.wB)(W.value,((e,t)=>{console.log(e,t),M(L.value+1)})),(0,a.sV)((()=>{M(0)})),(e,t)=>{const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",g,[m,C.value?((0,a.uX)(),(0,a.Wv)(c.A,{key:0,email:C.value},null,8,["email"])):(0,a.Q3)("",!0),p,(0,a.Lk)("form",k,[(0,a.Lk)("div",h,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(E.value,((e,t)=>((0,a.uX)(),(0,a.Wv)(o.A,{key:t,"should-focus":t,classes:"px-8",modelValue:W.value[t],"onUpdate:modelValue":e=>W.value[t]=e,type:"text",min:1,max:1,placeholder:""},null,8,["should-focus","modelValue","onUpdate:modelValue"])))),128))]),(0,a.bF)(s.A,{link:"",onClick:A,"is-loading":F.value},{default:(0,a.k6)((()=>[(0,a.eW)("Verify")])),_:1},8,["is-loading"])]),(0,a.bF)(l,{class:"text-purple-500 font-bold text-sm mt-2",to:"/auth/signin"},{default:(0,a.k6)((()=>[(0,a.eW)("Back to sign in")])),_:1})])}}};const x=y;var w=x}}]);
//# sourceMappingURL=742.4ececdb4.js.map